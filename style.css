* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Noto Sans JP, Hiragino Kaku Gothic ProN, Meiryo, sans-serif;
  color: #ffeef7;
  background:
    radial-gradient(1100px 700px at 20% -10%, rgba(244, 114, 182, 0.48), rgba(244, 114, 182, 0) 62%),
    radial-gradient(900px 600px at 85% 0%, rgba(255, 182, 193, 0.30), rgba(255, 182, 193, 0) 60%),
    radial-gradient(800px 600px at 50% 100%, rgba(244, 114, 182, 0.22), rgba(244,114,182,0) 60%),
    linear-gradient(180deg, #171428, #241a36);
}
.app-header {
  text-align: center;
  color: #e6e8ff;
  padding: 24px 12px 8px;
}
.app-header h1 { margin: 0; font-size: 24px; }
.subtitle { margin: 8px 0 0; opacity: 0.85; }

.container {
  display: grid;
  grid-template-columns: 1fr;
  gap: 16px;
  place-items: center;
  padding: 12px;
}
.stage {
  padding: 12px;
  background: rgba(18, 16, 32, 0.78);
  border-radius: 16px;
  box-shadow: 0 12px 36px rgba(0,0,0,0.5), inset 0 0 0 1px rgba(244,114,182,0.15);
}
canvas#stage {
  display: block;
  width: 300px; /* CSS ピクセル */
  height: 600px;
  background:
    radial-gradient(280px 170px at 25% 18%, rgba(244,114,182,0.16), rgba(244,114,182,0) 60%),
    radial-gradient(220px 130px at 80% 12%, rgba(34,211,238,0.08), rgba(34,211,238,0) 60%),
    linear-gradient(180deg, #0a0e22, #0a0d1c);
  border-radius: 10px;
}
.controls {
  display: flex;
  gap: 12px;
  align-items: center;
}
button#btn-restart {
  background: linear-gradient(180deg, #f472b6, #ec4899);
  border: none;
  color: white;
  padding: 10px 14px;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: transform .05s ease, opacity .2s ease;
}
button#btn-restart:hover { opacity: 0.95; }
button#btn-restart:active { transform: translateY(1px); }
.auto-toggle { color: #cfd2ff; }

/* コンテンツがフッターと重ならないように下余白を確保 */
.container { padding-bottom: 72px; }

/* 画面下に常時表示されるフッター */
.footer {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  display: grid;
  place-items: center;
  gap: 6px;
  padding: 10px 12px;
  color: #ffe7f3;
  background: linear-gradient(180deg, rgba(11,16,34,0.55), rgba(10,12,30,0.9));
  backdrop-filter: blur(6px);
  box-shadow: 0 -8px 20px rgba(0,0,0,0.35), inset 0 1px 0 rgba(244,114,182,0.22);
  z-index: 10;
}
.help-fixed { font-size: 12px; opacity: 0.9; }
.copyright { font-size: 11px; color: #fecdd3; }

/* Overlays */
.overlay {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  background:
    radial-gradient(740px 520px at 50% 30%, rgba(244,114,182,0.18), rgba(244,114,182,0) 60%),
    radial-gradient(600px 420px at 55% 35%, rgba(34,211,238,0.10), rgba(34,211,238,0) 60%),
    rgba(6, 8, 24, 0.62);
  backdrop-filter: blur(4px);
  opacity: 0;
  pointer-events: none;
  transition: opacity .3s ease;
}
.overlay.visible {
  opacity: 1;
  pointer-events: auto;
}
.overlay#overlay-start {
  background:
    linear-gradient(180deg, rgba(24,12,24,0.55), rgba(24,12,24,0.85)),
    url('images/sp_mainPoster3.c7d660811ca45424e5d5.webp');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}
.panel {
  background: rgba(22, 16, 32, 0.94);
  border-radius: 16px;
  padding: 20px 22px;
  width: min(90vw, 360px);
  box-shadow: 0 20px 60px rgba(0,0,0,0.5), inset 0 0 0 1px rgba(244,114,182,0.22);
  text-align: center;
  color: #ffeef7;
}
.panel h2 { margin: 0 0 8px; font-size: 22px; }
.panel p { margin: 6px 0 12px; color: #ffd1e4; }
.panel .hint { font-size: 12px; opacity: 0.9; }
.btn-primary {
  background: linear-gradient(180deg, #f472b6, #ec4899);
  color: white;
  border: none;
  padding: 10px 16px;
  border-radius: 10px;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 6px 16px rgba(236,72,153,0.35);
}
.btn-primary:hover { opacity: 0.95; }

/* Speech bubble */
.speech-bubble {
  position: fixed;
  top: 80px;
  left: 50%;
  transform: translateX(-50%) scale(0.98);
  background: rgba(255, 236, 244, 0.95);
  color: #5a1540;
  border-radius: 14px;
  padding: 10px 14px;
  max-width: min(90vw, 640px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.35), inset 0 0 0 1px rgba(244,114,182,0.35);
  opacity: 0;
  pointer-events: none;
  transition: opacity .25s ease, transform .25s ease;
  z-index: 20;
}
.speech-bubble.show {
  opacity: 1;
  transform: translateX(-50%) scale(1);
}
.speech-bubble::after {
  content: "";
  position: absolute;
  bottom: -10px;
  left: 50%;
  transform: translateX(-50%);
  border-width: 10px 10px 0 10px;
  border-style: solid;
  border-color: rgba(255,236,244,0.95) transparent transparent transparent;
}
